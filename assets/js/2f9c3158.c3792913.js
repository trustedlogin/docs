"use strict";(self.webpackChunktrustedlogin_docs=self.webpackChunktrustedlogin_docs||[]).push([[384],{5462:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>h});var i=t(4848),s=t(8453);const o={title:"Troubleshooting",sidebar_label:"Troubleshooting"},r=void 0,l={id:"Client/troubleshooting",title:"Troubleshooting",description:"Redirects happen from the Connector plugin, but logins aren't happening.",source:"@site/docs/Client/troubleshooting.md",sourceDirName:"Client",slug:"/Client/troubleshooting",permalink:"/Client/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/trustedlogin/docs/edit/main/docs/Client/troubleshooting.md",tags:[],version:"current",frontMatter:{title:"Troubleshooting",sidebar_label:"Troubleshooting"},sidebar:"Client",previous:{title:"Security Details",permalink:"/Client/security"}},a={},h=[{value:"Redirects happen from the Connector plugin, but logins aren&#39;t happening.",id:"redirects-happen-from-the-connector-plugin-but-logins-arent-happening",level:2},{value:"Check the TrustedLogin SDK log",id:"check-the-trustedlogin-sdk-log",level:3},{value:"Troubleshooting the Grant Support Access screen",id:"troubleshooting-the-grant-support-access-screen",level:2},{value:"Verify the Vendor public encryption key",id:"verify-the-vendor-public-encryption-key",level:3},{value:"If the CSS isn&#39;t loading on the Grant Support Access page",id:"if-the-css-isnt-loading-on-the-grant-support-access-page",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"redirects-happen-from-the-connector-plugin-but-logins-arent-happening",children:"Redirects happen from the Connector plugin, but logins aren't happening."}),"\n",(0,i.jsxs)(n.p,{children:["This can be caused by Client SDK initialization that is either too late, or initialization that doesn't occur on the front-end. (such as ",(0,i.jsx)(n.code,{children:"admin_init"}),")."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check to make sure your initialization hook is early enough in the process. ",(0,i.jsx)(n.code,{children:"init"})," is a good default. The ",(0,i.jsx)(n.code,{children:"template_redirect"})," hook is the last possible hook you can use. ",(0,i.jsx)(n.a,{href:"https://developer.wordpress.org/apis/hooks/action-reference/",children:"Here is an ordered list of WordPress hooks"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure your initialization hook is also running on the front-end. If you are using ",(0,i.jsx)(n.code,{children:"admin_init"}),", it will not run on the front-end. Use ",(0,i.jsx)(n.code,{children:"init"})," instead."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"check-the-trustedlogin-sdk-log",children:"Check the TrustedLogin SDK log"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.a,{href:"/Client/configuration",children:"logging in the configuration array"})," by setting ",(0,i.jsx)(n.code,{children:"logging/enabled"})," to ",(0,i.jsx)(n.code,{children:"true"})," and ",(0,i.jsx)(n.code,{children:"logging/threshold"})," to ",(0,i.jsx)(n.code,{children:"debug"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Attempt a login."}),"\n",(0,i.jsxs)(n.li,{children:["Check the log file (the default location of the log is located at ",(0,i.jsx)(n.code,{children:"wp-content/uploads/trustedlogin-logs/trustedlogin-client-debug-{date}-{hash}-.log"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If there are no new log items, then the Client SDK is not being initialized, likely due to the initialization hook not being early enough in the process or not running on the front-end."}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-the-grant-support-access-screen",children:"Troubleshooting the Grant Support Access screen"}),"\n",(0,i.jsxs)(n.p,{children:["First things first: make sure you have the ",(0,i.jsx)(n.a,{href:"/Client/updating.md",children:"latest version of TrustedLogin"})," installed."]}),"\n",(0,i.jsxs)(n.p,{children:["Make sure you are logged in as an administrator and then add ",(0,i.jsx)(n.code,{children:"&debug=true"})," to the end of the URL. That will activate Debug Mode, which shows more information about what's happening behind the scenes."]}),"\n",(0,i.jsx)(n.h3,{id:"verify-the-vendor-public-encryption-key",children:"Verify the Vendor public encryption key"}),"\n",(0,i.jsx)(n.p,{children:"If access keys are generated, but the keys aren't working to log into a site, it may be a mismatched Vendor public encryption key. This is the key that TrustedLogin uses to encrypt the data sent to the Vendor. If this key is incorrect, the Vendor won't be able to decrypt the data and the Grant Support Access screen won't work."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'With the debug information showing, click the "Verify Public Key" link.'}),"\n",(0,i.jsxs)(n.li,{children:["This will open a new tab with the public key displayed in a JSON response:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n "publicKey": "a12bcd34e56db687a153b0a1aee26b196a75zba064ac62d8d41440455a8fb40f"\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Check that the ",(0,i.jsx)(n.code,{children:"publicKey"})," value matches the public key displayed in the debug information."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What to do if the public key doesn't match:"})," wait 10 minutes and try again. The Vendor public key is cached for a maximum of 10 minutes. If you check it again after 10 minutes, and it still doesn't match, contact TrustedLogin support."]}),"\n",(0,i.jsx)(n.h3,{id:"if-the-css-isnt-loading-on-the-grant-support-access-page",children:"If the CSS isn't loading on the Grant Support Access page"}),"\n",(0,i.jsxs)(n.p,{children:["If you have ",(0,i.jsx)(n.a,{href:"/Client/css-namespacing",children:"modified the CSS namespacing"}),", that is the likley culprit."]}),"\n",(0,i.jsxs)(n.p,{children:["Otherwise, this is likely an issue with the ",(0,i.jsx)(n.code,{children:"build-sass"})," script not being passed the same ",(0,i.jsx)(n.code,{children:"namespace"})," flag as the Client is using."]}),"\n",(0,i.jsxs)(n.p,{children:["Make sure the ",(0,i.jsx)(n.code,{children:"--namespace="})," setting in the Composer file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'  "trustedlogin": [ \n    // highlight-next-line\n    "@php vendor/bin/build-sass --namespace=example-namespace"\n  ],\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Matches the ",(0,i.jsx)(n.code,{children:"vendor/namespace"})," setting in the Config settings array:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$config = [\n    // ...\n\t'vendor' => [\n\t    // highlight-next-line\n\t\t'namespace' => 'example-namespace',\n    // ...\n];\n"})}),"\n",(0,i.jsx)(n.p,{children:"If those are not the same, the CSS rules will not match the HTML generated and won't be applied."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);